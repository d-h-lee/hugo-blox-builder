{{ $item := .item }}
{{ $has_attachments := partial "functions/has_attachments" $item }}
<!-- DHL -->
{{ $index := .index }}
{{ $total := .total }}
{{ $number := sub (int $total) (int $index) }}

{{ $pubtypes := $item.Params.publication_types }}
{{ $pubtype := "0" }}
{{ if $pubtypes }}
  {{ $pubtype = index $pubtypes 0 }}
{{ end }}
<!-- DHL
# Publication type.
# Legend: 0 = Uncategorized; 1 = Conference paper; 2 = Journal article;
# 3 = Preprint / Working Paper; 4 = Report; 5 = Book; 6 = Book section;
# 7 = Thesis; 8 = Patent
https://www.w3schools.com/icons/icons_reference.asp see Font Awesome 5
-->
<!-- {{ $icon := "fa-file" }}  {{/* default */}}
{{ if eq $pubtype "1" }} {{ $icon = "fa-file-alt" }} {{ end }}       {{/* conference */}}
{{ if eq $pubtype "2" }} {{ $icon = "fa-file-invoice" }} {{ end }}       {{/* journal */}}
{{ if eq $pubtype "3" }} {{ $icon = "fa-file" }} {{ end }}             {{/* preprint */}}
{{ if eq $pubtype "4" }} {{ $icon = "fa-file-archive" }} {{ end }}             {{/* report */}}
{{ if eq $pubtype "5" }} {{ $icon = "fa-book" }} {{ end }}             {{/* book */}}
{{ if eq $pubtype "6" }} {{ $icon = "fa-book-open" }} {{ end }}             {{/* book section */}}
{{ if eq $pubtype "7" }} {{ $icon = "fa-graduation-cap" }} {{ end }}   {{/* thesis */}}
{{ if eq $pubtype "8" }} {{ $icon = "fa-cog" }} {{ end }}              {{/* patent */}} -->

<div class="pub-list-item view-citation" style="margin-bottom: 1rem">
  <span class="pub-number fw-bold text-secondary">{{ $number }}.</span>
  <i class="far fa-file-alt pub-icon" aria-hidden="true"></i>

  {{/* APA Style */}}
  {{ if eq (site.Params.publications.citation_style | default "apa") "apa" }}

  <span class="article-metadata li-cite-author">
    {{ partial "page_metadata_authors" $item }}
  </span>
  ({{- $item.Date.Format "2006" -}}).
  <a href="{{ $item.RelPermalink }}">{{ $item.Title }}</a>.
  {{ if $item.Params.publication_short }}
    {{- $item.Params.publication_short | markdownify -}}.
  {{ else if $item.Params.publication }}
    {{- $item.Params.publication | markdownify -}}.
  {{ end }}
  <div class="btn-links">{{ partial "page_links" (dict "page" $item "is_list" 1) }}</div>

  {{/* MLA Style */}}
  {{ else }}

  <span class="article-metadata li-cite-author">
    {{ partial "page_metadata_authors" $item }}.
  </span>
  <a href="{{ $item.RelPermalink }}">{{ $item.Title }}</a>.
  {{ if $item.Params.publication_short }}
    {{- $item.Params.publication_short | markdownify -}},
  {{ else if $item.Params.publication }}
    {{- $item.Params.publication | markdownify -}},
  {{ end }}
  {{- $item.Date.Format "2006" -}}.

  {{ if $has_attachments }}
  <div class="btn-links">
    {{ partial "page_links" (dict "page" $item "is_list" 1) }}
  </div>
  {{ end }}

  {{ end }}
</div>
